if(!window.BQQWPALOAD){(function(aP,z){var ai="2.1.20130225";var aw=false,af=false;var ap="0",aU="1",s="2",E="4",J="20",j="0",ad="1",aF="2",a1="4",B="5",al="0",M="1",K="0",ah="1",U="2",aM="0",u="1",aq="2",aH="0",m="1";var n=2000,G=1000,R=2000,aT=2000,f=5000,D=15000,ar=3600000,q=1000;var aB="kfu",p="pgv_pvi";var au="is",X="ik",ak="msg",aK="mh",am="mid",aY="slid";var ax="0",e="1",aX="2",ab="0",aV="-1",aC="|";var a="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/wpa_first_heart_beat.php",aj="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/wpa_heart_beat.php",I="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/auto_invite.php";var aD=0,g="0",v="1",w="2",aW=1;var aO=3000,at=120;var aZ="",aR="qq.com,pengyou.com,qzoneapp.com,nipic.com,docin.com,51zxw.net,2155.com,xd.com,yto.net.cn,c-c.com,27.cn,05wan.com,alivv.cn,gogo.com,doctorjob.com.cn,emoney.cn,m4.cn,chinaktv.net,yk988.com,bangkaow.com,wsxsp.com,55tools.com,youxi518.com",av=1,t="b.qq.com,sales.b.qq.com,guilin.house.qq.com,ta.qq.com,hn.qq.com,nantong.house.qq.com";var T="http://cdn.b.qq.com",c=T+"/account/bizqq/";var S="_WPA_VIEW_HELPER",an="WPA_VIEW_HELPER";var ac=0.9;var P=aP.document;var aS=function(){return +new Date()};var i=function(a5){a5+=a5.indexOf("?")>-1?"":"?";a5+="&"+aS();var a4="log_"+aS(),a3=aP[a4]=new Image();a3.onload=a3.onerror=function(){aP[a4]=null};a3.src=a5;a3=null};var aA;(function(){aA=function(a4,a3,a5){this.url="http://isdspeed.qq.com/cgi-bin/r.cgi?flag1="+a4+"&flag2="+a3+"&flag3="+a5+"&";this.p0=aS();this.points=[this.p0]};aA.prototype={addPoint:function(a3,a6){var a5=this.points;if(a3>=a5.length){for(var a4=a5.length;a4<a3;a4++){a5.push(0)}}a6=a6||(aS()-this.p0);a5[a3]=a6;return this},pushPoint:function(a3){a3=a3||(aS()-this.p0);this.points.push(a3);return this},send:function(){var a4=this.url,a6=this.points;for(var a5=1,a3=a6.length;a5<a3;a5++){if(a6[a5]){a4+=a5+"="+a6[a5]+"&"}}(Math.random()<ac)&&i(a4);return this}}})();var N=new aA("7818","4","1");var C=/^https/.test(aP.location.href);var aN=P.domain;var l=function(){var a4=/\.((edu)|(gov)|(com)|(org)|(net))\.cn$/,a3=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,a5=a4.test(aN)?-3:a3.test(aN)?0:-2;return aN.split(".").slice(a5).join(".")}();var aQ=function(){var a4=l,a3=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,a5=/^localhost$/;return aZ.indexOf(a4)===-1&&!a3.test(a4)&&!a5.test(a4)}();var H=function(){try{var a5=/^http[s]?:[\/]{2,3}([^\/$]+)/.exec(location.href)[1];var a4=new RegExp("(^|,)"+a5);if(a4.test(t)){return true}var a3=l,a7=new RegExp("(^|,)"+l);IPReg=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,LocalReg=/^localhost$/;return !a7.test(aR)&&!IPReg.test(a3)&&!LocalReg.test(a3)}catch(a6){}}();var aJ=function(a6){a6=a6.toLowerCase();var a5={};var a4=/(chrome)[ \/]([\w.]+)/.exec(a6)||/(webkit)[ \/]([\w.]+)/.exec(a6)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a6)||/(msie) ([\w.]+)/.exec(a6)||a6.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a6)||[];var a3={browser:a4[1]||"",version:a4[2]||"0"};if(a3.browser){a5[a3.browser]=true;a5.version=a3.version}if(a5.chrome){a5.webkit=true}else{if(a5.webkit){a5.safari=true}}a5.isMobile=a6.match(/(nokia|iphone|android|motorola|^mot\-|softbank|foma|docomo|kddi|up\.browser|up\.link|htc|dopod|blazer|netfront|helio|hosin|huawei|novarra|CoolPad|webos|techfaith|palmsource|blackberry|alcatel|amoi|ktouch|nexian|samsung|^sam\-|s[cg]h|^lge|ericsson|philips|sagem|wellcom|bunjalloo|maui|symbian|smartphone|midp|wap|phone|windows ce|iemobile|^spice|^bird|^zte\-|longcos|pantech|gionee|^sie\-|portalmmm|jig\s browser|hiptop|^ucweb|^benq|haier|^lct|opera\s*mobi|opera\*mini|320x320|240x320|176x220)/i);a5.isWindow=/windows|win32/.test(a6);return a5}(aP.navigator.userAgent);var A=function(a4,a3){return function(){a3.apply(a4,arguments)}};var L={log:aP.console&&aw?function(a3){aP.console.log(a3)}:function(){}};var o=function(a3){return function(){return Math.max(a3.documentElement.scrollTop,a3.body.scrollTop)}}(P);var Y=function(a3){return function(){return a3.compatMode=="CSS1Compat"?a3.documentElement.clientWidth:a3.body.clientWidth}}(P);var r=function(a3){return function(){return a3.compatMode=="CSS1Compat"?a3.documentElement.clientHeight:a3.body.clientHeight}}(P);var V=P.documentElement.contains?function(a5,a4){var a6=a5.nodeType===9?a5.documentElement:a5,a3=a4&&a4.parentNode;return a5===a3||!!(a3&&a3.nodeType===1&&a6.contains&&a6.contains(a3))}:P.documentElement.compareDocumentPosition?function(a4,a3){return a3&&!!(a4.compareDocumentPosition(a3)&16)}:function(a4,a3){while((a3=a3.parentNode)){if(a3===a4){return true}}return false};var ag=function(){var a3=P.defaultView&&P.defaultView.getComputedStyle?function(a7,a6){a6=a6.replace(/([A-Z])/g,"-$1").toLowerCase();var a5=P.defaultView.getComputedStyle(a7,"");return a5&&a5.getPropertyValue(a6)}:function(a6,a5){return a6.currentStyle[a5]};var a4=function(a8,a7){if(!V(a8,P)){return a7()}var a5={opacity:0,filter:"alpha(opacity=0)"},a6=a8.parentNode,a9=a8.nextSibling;div=P.createElement("div"),returnValue;div.appendChild(a8);ag(div,a5);ag(a8,a5);P.body.appendChild(div);returnValue=a7();a9?a6.insertBefore(a8,a9):a6.appendChild(a8);div.parentNode.removeChild(div);return returnValue};return function(a8,a7,a9){var a6;if(!a9){if(typeof a7==="string"){return a4(a8,function(){return a3(a8,a7)})}if(typeof a7!=="object"){new TypeError("Arg style should be string or object")}a6=[];for(var a5 in a7){a6.push(a5+":"+a7[a5])}a6=a6.join(";")}else{a6=a7+":"+a9}a6=a6.replace(/([A-Z])/g,"-$1").toLowerCase();a8.style.cssText+=";"+a6;return a8}}();var a0=function(){return{addClass:function(a4,a3){if(!a4||!a3){return a4}if(!a4.className){a4.className=a3;return a4}if(this.hasClass(a4,a3)){return a4}a4.className+=" "+a3;return a4},hasClass:function(a4,a3){return(a4&&a3)?new RegExp("\\b"+a3+"\\b").test(a4.className):false},removeClass:function(a4,a3){if(!a4||!a3){return a4}if(!this.hasClass(a4,a3)){return a4}if(a4.className){a4.className=a4.className.replace(a3,"")}else{a4.setAttribute=a4.getAttribute("class").replace(a3,"")}return a4}}}();var Q=function(a3){return a3.addEventListener?function(a6,a4,a5){a6.addEventListener(a4,a5);return a6}:function(a6,a4,a5){a6.attachEvent("on"+a4,a5);return a6}}(aP);var W=function(a3){return a3.removeEventListener?function(a6,a4,a5){a6.removeEventListener(a4,a5);return a6}:function(a6,a4,a5){a6.detachEvent("on"+a4,a5);return a6}}(aP);var aG=function(a4,a3){a3=a3||aP;if(/loaded|complete|undefined/.test(a3.document.readyState)){a4()}else{Q(a3,"load",a4)}return a3};var aE=function(a5,a9){a9=a9||{};var a7=a9.context||aP,a3=a7.document||a3,ba=a9.callback;var a8=a3.getElementsByTagName("head")[0],a6=a8.getElementsByTagName("base")[0],a4=a3.createElement("script");a4.onload=a4.onerror=a4.onreadystatechange=function(bb){if(/loaded|complete|undefined/.test(a4.readyState)){a4.onload=a4.onerror=a4.onreadystatechange=null;if(a4.parentNode){a4.parentNode.removeChild(a4)}a4=null;ba&&ba(bb||a7.event,a4)}};a4.type="text/javascript";a4.charset=a9.charset||"utf-8";a4.async=true;a4.src=a5;(function(){try{a6?a8.insertBefore(a4,a6):a8.appendChild(a4)}catch(bb){setTimeout(arguments.callee,0)}})();return a4};var aa=function(){return{load:function(a4,a3,a7){a7=a7||{};var a5=a7.context||P;var a6=a5.createElement("link");a6.name=a4;a6.type="text/css";a6.setAttribute("rel","stylesheet");a6.setAttribute("href",a3);(function(){try{var a8=a5.getElementsByTagName("head")[0];a8.insertBefore(a6,a8.firstChild)}catch(a9){setTimeout(arguments.callee,1)}})();return a6},add:function(a3,a7,a8){a8=a8||{};var a4=a8.context||P;var a6=a4.createElement("style");a6.type="text/css";a6.name=a3;var a5=a4.getElementsByTagName("body")[0];a5.insertBefore(a6,a5.firstChild);if(a6.styleSheet){a6.styleSheet.cssText=a7}else{a6.appendChild(a4.createTextNode(a7))}return a6}}}();var aL=(function(){var a3=0;return function(a6,a8,a9){if(!a9){a9=a8;a8={}}var a4="JSONP_CALLBACK_"+a3++,a5;aP[a4]=function(){a9&&a9.apply(aP,arguments);a5.parentNode.removeChild(a5);aP[a4]=null};a8.cb=a4;var ba=[];for(var a7 in a8){if(a8[a7]&&a8.hasOwnProperty(a7)){ba.push(a7+"="+encodeURIComponent(a8[a7]||""))}}a6+=(a6.indexOf("?")>-1?"&":"?")+ba.join("&");a5=aE(a6)}})();var ae;(function(){ae={set:function(a4,a6,a5,a8,a3){if(a3){a3=new Date(aS()+a3)}var a7=a4+"="+escape(a6)+((a3)?"; expires="+a3.toGMTString():"")+((a8)?"; path="+a8:"")+((a5)?"; domain="+a5:"");if(a7.length<4096){aP.document.cookie=a7}return ae},get:function(a4){var a3=aP.document.cookie.match(new RegExp("(^| )"+a4+"=([^;]*)(;|$)"));if(a3!=null){return unescape(a3[2])}return null},del:function(a3,a4,a5){if(this.get(a3)){aP.document.cookie=a3+"="+((a5)?"; path="+a5:"")+((a4)?"; domain="+a4:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},find:function(a3){return aP.document.cookie.match(a3).split(",")}}})();var k;(function(){var a3=ae;k=function(a4){this.blockIndex=a4};k.get=function(a4){return a3.get(a4)};k.set=function(a4,a5){return a3.set(a4,a5,l)};k.del=function(a4){return a3.del(a4,l)};k.find=function(){return a3.find.apply(a3,arguments)};k.prototype={set:function(a4,a5){return a3.set(this.blockIndex+a4,a5,l)},get:function(a4){return a3.get(this.blockIndex+a4)},del:function(a4){return a3.del(this.blockIndex+a4,l)},find:function(a8){var a7=a3.find(new RegExp(this.blockIndex+"[^=]*")),a6=a7.join(";").replace(new RegExp(this.blockIndex,"g"),"").split(";");for(var a5=0,a9,a4=[];a9=a6[a5++];){if(a8.test&&a8.test(a9)){a4.push(a9);continue}if(a9.indexOf(a8)>-1){a4.push(a9)}}return a4}}})();var d=function(){var a3={container:P.getElementsByTagName("body")[0],template:['<div class="WPA-CONFIRM">','<h3 class="WPA-CONFIRM-TITLE"><%=title%></h3>','<div class="WPA-CONFIRM-CONTENT" style="">',"<%=content%>","</div>",'<div class="WPA-CONFIRM-PANEL" style=""><%=buttons%></div>',"</div>"].join(""),buttonTemplate:['<a href="javascript:;" class="WPA-CONFIRM-BUTTON"><span class="WPA-CONFIRM-BUTTON-PADDING WPA-CONFIRM-BUTTON-LEFT"></span><span class="WPA-CONFIRM-BUTTON-TEXT"><%=text%></span><span class="WPA-CONFIRM-BUTTON-PADDING WPA-CONFIRM-BUTTON-RIGHT"></span></a>'].join(""),cssText:[".WPA-CONFIRM { z-index:2147483647; min-width:400px; min-height:105px; width:auto!important; height:auto!important; width:400px; height:105px; margin:0; padding:12px 8px 30px 18px; border:1px solid #3473a3; border-radius:3px; background-color:#f9fcff;}",".WPA-CONFIRM-TITLE { height:12px; margin:0; padding:0; line-height:12px; color:#234864; font-weight:bold; font-size:12px;}",".WPA-CONFIRM-CONTENT { margin:0; padding:19px 10px 0 0; line-height:19px; color:#234864; font-size:12px;}",".WPA-CONFIRM-PANEL { position:absolute; right:8px; bottom:8px; margin:0; padding:0; text-align:right;}",".WPA-CONFIRM-BUTTON { position:relative; display:inline-block!important; display:inline; zoom:1; min-width:62px; height:22px; margin:0 0 0 5px; padding:0 4px; background:url(http://cdn.b.qq.com/account/bizqq/images/wpa/wpa_confirm_sprites.png) repeat-x 0 -163px; line-height:22px; color:#234864; text-decoration:none; font-size:12px; text-align:center;}",".WPA-CONFIRM-BUTTON:hover { background-position:0 -207px; text-decoration:none; color:##234864;}",".WPA-CONFIRM-BUTTON:active { background-position:0 -251px; text-decoration:none; color:##234864;}",".WPA-CONFIRM-BUTTON-FOCUS { background-position:0 -31px;}",".WPA-CONFIRM-BUTTON-FOCUS:hover { background-position:0 -75px;}",".WPA-CONFIRM-BUTTON-FOCUS:active { background-position:0 -119px;}",".WPA-CONFIRM-BUTTON-PADDING { position:absolute; left:0; top:0; display:inline-block!important; display:inline; zoom:1; width:4px; height:22px; background:url(http://cdn.b.qq.com/account/bizqq/images/wpa/wpa_confirm_sprites.png) no-repeat 0 -141px;}",".WPA-CONFIRM-BUTTON:hover .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -185px;}",".WPA-CONFIRM-BUTTON:active .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -229px;}",".WPA-CONFIRM-BUTTON-FOCUS .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -9px;}",".WPA-CONFIRM-BUTTON-FOCUS:hover .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -53px;}",".WPA-CONFIRM-BUTTON-FOCUS:active .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -97px;}",".WPA-CONFIRM-BUTTON-RIGHT { left:auto; right:0; background-position:-5px -141px;}",".WPA-CONFIRM-BUTTON:hover .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -185px;}",".WPA-CONFIRM-BUTTON:active .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -229px;}",".WPA-CONFIRM-BUTTON-FOCUS .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -9px;}",".WPA-CONFIRM-BUTTON-FOCUS:hover .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -53px;}",".WPA-CONFIRM-BUTTON-FOCUS:active .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -97px;}"].join(""),buttons:[{isFocus:true,text:"\u786E\u8BA4",events:{click:function(){this.remove()}}},{text:"\u53D6\u6D88",events:{click:function(){this.remove()}}}],modal:true};aa.add("_WPA_CONFIRM_STYLE",a3.cssText);var a4=function(a5){this.opts=a5;this.render()};a4.prototype={render:function(){var a6=this,a7=this.opts,a5=this.container=a7.container||P.getElementsByTagName("body")[0];var bb=a7.template||a3.template,ba="WPA_BUTTONS_PLACE"+(+new Date()%100)+Math.floor(Math.random()*100);bb=bb.replace(/<%=title%>/g,a7.title||"").replace(/<%=content%>/g,a7.content||"").replace(/<%=buttons%>/g,'<div id="'+ba+'"></div>');var a9=P.createElement("div"),a8;a9.innerHTML=bb;this.$el=a8=a9.firstChild;(function(){try{a5.appendChild(a8)}catch(bc){setTimeout(arguments.callee,1);return}if(a7.modal||a3.modal){a6.renderModal()}a6.renderButtons(ba);a6.setCenter()})()},renderButtons:function(a6){var a9=P.getElementById(a6),bc=a9.parentNode;bc.removeChild(a9);var bg=this.opts.buttons||a3.buttons,a7=this.opts.buttonTemplate||a3.buttonTemplate,bf=P.createElement("div"),bb,a5,be;for(var ba=0,a8=bg.length;ba<a8;ba++){a5=bg[ba];bf.innerHTML=a7.replace("<%=text%>",a5.text);bb=bf.firstChild;a5.isFocus&&a0.addClass(bb,"WPA-CONFIRM-BUTTON-FOCUS");if(a5.events){be=a5.events;for(var bd in be){if(be.hasOwnProperty(bd)){Q(bb,bd,A(this,be[bd]))}}}bc.appendChild(bb)}},renderModal:function(){var a7=this.container,a8=ag(a7,"width"),a6=ag(a7,"height"),bb=ag(a7,"overflow");var a5=P.createElement("div"),a9={position:"fixed",top:0,left:0,zIndex:2147483647,width:Y()+"px",height:r()+"px",backgroundColor:"black",opacity:0.3,filter:"alpha(opacity=30)"};var ba=P.compatMode==="BackCompat";if((aJ.msie&&parseInt(aJ.version,10)<7)||ba){a9.position="absolute";setInterval(A(a5,function(){this.style.top=o()+"px"}),128)}ag(a5,a9);a7.insertBefore(a5,this.$el);this.modal=a5;Q(aP,"resize",A(a5,function(){ag(this,{width:Y()+"px",height:r()+"px"})}))},show:function(){this.css("display","block");this.modal&&ag(this.modal,"display","block");return this},hide:function(){this.css("display","none");this.modal&&ag(this.modal,"display","none");return this},remove:function(){this.$el.parentNode.removeChild(this.$el);this.modal&&this.modal.parentNode.removeChild(this.modal);return this},css:function(){var a5=[this.$el].concat(Array.prototype.slice.call(arguments));return ag.apply(this,a5)},setCenter:function(){this.css({position:"absolute",top:"50%",left:"50%"});var a5={position:"fixed",marginLeft:"-"+this.outerWidth()/2+"px",marginTop:"-"+this.outerHeight()/2+"px"};var a6=P.compatMode==="BackCompat";if((aJ.msie&&parseInt(aJ.version,10)<7)||a6){a5.position="absolute";a5.marginTop=0;var a7=a5.top=(r()-this.outerHeight())/2;setInterval(A(this.$el,function(){this.style.top=o()+a7+"px"}),128)}this.css(a5)},outerWidth:function(){return this.$el.offsetWidth},outerHeight:function(){return this.$el.offsetHeight}};return a4}();var F;(function(){F={add:function(a4){var a3=P.createElement("script");a3.src=a4;P.getElementsByTagName("head")[0].appendChild(a3)}}})();var y;(function(){var a8="run",a7="pause",a5="drop",a4=500;var a3=function(){this.circle=[];this.pos=0;setInterval(A(this,this.loop),16)};a3.prototype={newTask:function(ba,bb){var a9=new a6(ba,bb);this.circle.push(a9);return a9},once:function(a9,ba){return this.newTask(function(){a9.apply(this);this.drop()},ba)},loop:function(){var be=this.circle,bd=this.pos,bb=be.length,bc=aS(),ba=a4,a9=be[bd];while(bb>0&&aS()-bc<ba){if(a9.isRunning()){a9.execute()}else{if(a9.isDropped()){be.splice(bd,1);bd--}}bd=(bd+1)%be.length;a9=be[bd];bb--}this.pos=bd}};var a6=function(a9,ba){this.fn=a9;this.gap=ba;this.status=a7;this.lastExecTime=aS()};a6.prototype={run:function(){this.status=a8;return this},pause:function(){this.status=a7;return this},drop:function(){this.status=a5;return this},execute:function(){if(aS()-this.lastExecTime<this.gap){return false}this.fn();this.lastExecTime=aS();return true},getGap:function(){return this.gap},setGap:function(a9){this.gap=a9;return this},isRunning:function(){return this.status===a8},isPaused:function(){return this.status===a7},isDropped:function(){return this.status===a5}};y=new a3()})();var Z;(function(a3){var a5=a3.title,a4=y.newTask(function(){var a6=a3.title;a3.title=a6.substr(1,a6.length)+a6.substr(0,1)},at);Z={on:function(a6){a3.title=a6+(""+a3.title);a4.run()},off:function(){a4.pause();a3.title=a5}}})(P);var x=function(a8,a6,a4,a7){var a5=a4-a8.length,a3;if(a7===false){for(a3=0;a3<a5;a3++){a8+=a6}}else{for(a3=0;a3<a5;a3++){a8=a6+a8}}return a8};var a2=function(){var a4=function(a7,a6,a5){return a7.replace(new RegExp("(^[\\d]{"+a6+"})\\d"),"$1#"+a5).replace("#","")};var a3=function(a5){this.bits=a5};a3.prototype={pad:function(a7,a6,a8){var a5=Array.prototype.slice.call(arguments);this.bits=a7.apply(this,[this.bits].concat(a5));return this},padLeft:function(){return A(this,this.pad)},padRight:function(){var a5=Array.prototype.slice.call(arguments).push(false);return this.pad.apply(this,a5)},getChar:function(a5){return this.bits.charAt(a5)},setChar:function(a5,a6){this.bits=a4(this.bits,a5,a6);return this},reverse:function(){var a7=this.bits,a6=a7.length;for(var a5=0;a5<a6;a5++){this.setChar(a5,parseInt(a7[a5],2)^1)}return this}};return a3}();var ao=function(a4){var a3;return getVersion=function(ba){if(typeof a3!=="undefined"){ba(a3);return}if(a4.msie){try{var a7=new ActiveXObject("TimwpDll.TimwpCheck");a3=a7.GetHummerQQVersion()}catch(a9){a3=null}ba(a3);return}if(a4.mozilla||a4.webkit){var a5=P.getElementsByTagName("body")[0],a8=P.createElement("iframe"),a6="http://cdn.b.qq.com/account/bizqq/wpa/getQQVersion.html";a8.style.display="none";Q(aP,"message",function(bb){if(bb.origin!=="http://cdn.b.qq.com"){return}a3=bb.data;ba(a3);W(aP,"message",arguments.callee);a8.parentNode.removeChild(a8)});a8.src=a6;a5.insertBefore(a8,a5.firstChild);return}a3=null;ba(a3)}}(aJ);var aI;(function(){var a4={a01:{templ:'<div id="wpa_release_a01" class="wpa_release_a01"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a01",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML=ba.xssFilter(ba.params.btn1);ba.getOnlineStatus();ba.addEvent(a9.getElementById("launchBtn"),"click",ba.proxy(ba,ba.chat))}},a02:{templ:'<div id="wpa_release_a02" class="wpa_release_a02"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a02",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML=ba.xssFilter(ba.params.btn1);ba.getOnlineStatus();ba.addEvent(a9.getElementById("launchBtn"),"click",ba.proxy(ba,ba.chat))}},a03:{templ:'<div id="wpa_release_a03" class="wpa_release_a03"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a03",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML="\u533F\u540D\u4EA4\u8C08";ba.getOnlineStatus();ba.addEvent(a9.getElementById("launchBtn"),"click",ba.proxy(ba,ba.chat));ba.wpa.getConfig()}},a04:{templ:'<div id="wpa_release_a04" class="wpa_release_a04"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a04",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML=ba.xssFilter(ba.params.btn1);ba.getOnlineStatus();ba.addEvent(a9.getElementById("launchBtn"),"click",ba.proxy(ba,ba.chat))}},a05:{templ:'<div id="wpa_release_a05" class="wpa_release_a05"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a05",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML=ba.xssFilter(ba.params.btn1);ba.getOnlineStatus();ba.addEvent(a9.getElementById("launchBtn"),"click",ba.proxy(ba,ba.chat))}},a06:{templ:'<div id="wpa_release_a06" class="wpa_release_a06"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a06",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML=ba.xssFilter(ba.params.btn1);ba.getOnlineStatus();ba.addEvent(a9.getElementById("launchBtn"),"click",ba.proxy(ba,ba.chat))}},a07:{templ:'<div id="wpa_release_a07" class="wpa_release_a07 wpa_release_a07_01"><div><table><tr><td valign="middle" id="btn"></td></tr></table></div></div>',script:"js/wpa_a07",style:"css/wpa",init:function(a9,ba){a9.getElementById("btn").innerHTML=ba.xssFilter(ba.params.btn1);ba.addClass(a9.getElementById("wpa_release_a07"),"wpa_release_a07_0"+parseInt(ba.params.tx,10));ba.getOnlineStatus();ba.addEvent(a9.getElementById("wpa_release_a07"),"click",ba.proxy(ba,ba.chat))}},a08:{templ:'<div id="wpa_release_a08" class="wpa_release_a08 wpa_release_a08_01"><div><table><tr><td valign="middle" id="launchBtn"></td></tr></table></div></div>',script:"js/wpa_a08",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML=ba.xssFilter(ba.params.btn1);ba.addClass(a9.getElementById("wpa_release_a08"),"wpa_release_a08_0"+parseInt(ba.params.tx,10));ba.getOnlineStatus();ba.addEvent(a9.getElementById("wpa_release_a08"),"click",ba.proxy(ba,ba.chat))}},a09:{templ:'<div id="wpa_release_a09" class="wpa_release_a09 wpa_release_a09_01"><a id="wpa_release_a09_btn" href="javascript:;"><span class="wpa_release_a09_c_s1" id="wpa_release_a09_c_s1"></span><br /><span class="wpa_release_a09_c_s2" id="wpa_release_a09_c_s2"></span></a></div>',script:"js/wpa_a09",style:"css/wpa",init:function(a9,ba){a9.getElementById("wpa_release_a09_c_s1").innerHTML=ba.xssFilter(ba.params.btn1);a9.getElementById("wpa_release_a09_c_s2").innerHTML=ba.xssFilter(ba.params.btn2);ba.addClass(a9.getElementById("wpa_release_a09"),"wpa_release_a09_0"+parseInt(ba.params.tx,10));ba.getOnlineStatus();ba.addEvent(a9.getElementById("wpa_release_a09"),"click",ba.proxy(ba,ba.chat))}},b01:{templ:['<div id="wpa_release_b01" class="wpa_release_b01 wpa_release_b01_01">','<div id="wpa_release_b01_title" class="wpa_release_b01_title"></div>','<div id="wpa_release_b01_content" class="wpa_release_b01_content"></div>','<div id="wpa_release_b01_btn_box" class="wpa_release_b01_btn_box"><a id="wpa_release_b01_btn" href="javascript:;"></a></div>',"</div>"].join(""),script:"js/wpa_b01",style:"css/wpa",init:function(ba,bb){ba.getElementById("wpa_release_b01_btn").innerHTML=bb.xssFilter(bb.params.btn1);ba.getElementById("wpa_release_b01_title").innerHTML=bb.xssFilter(bb.params.title);var a9=decodeURIComponent(bb.params.tx);if(a9.indexOf("http")===-1){a9=/^https/.test(aP.location.href)?"https://id.b.qq.com/static/account/bizqq/images/wpa/wpa_tx_0"+a9+".jpg":"http://cdn.b.qq.com/account/bizqq/images/wpa/wpa_tx_0"+a9+".jpg"}ba.getElementById("wpa_release_b01_content").innerHTML='<img src="'+bb.xssFilter(a9)+'" alt="'+bb.xssFilter(bb.params.title)+'" />';bb.addClass(ba.getElementById("wpa_release_b01"),"wpa_release_b01_0"+parseInt(bb.params.csty,10));bb.addEvent(ba.getElementById("wpa_release_b01_btn"),"click",bb.proxy(bb,bb.chat))}},b02:{templ:['<div id="wpa_release_b02" class="wpa_release_b02 wpa_release_b02_01">','<div class="wpa_release_b02_title"><span id="wpa_release_b02_title"></span></div>','<div id="wpa_release_b02_content" class="wpa_release_b02_content">','<div id="wpa_release_b02_c_lc" class="wpa_release_b02_c_lc"></div>','<div id="wpa_release_b02_c_rc" class="wpa_release_b02_c_rc"></div>',"</div>",'<div id="wpa_release_b02_btn_box" class="wpa_release_b02_btn_box"><a id="wpa_release_b02_btn_yes" class="wpa_release_b02_btn_yes" href="javascript:;"></a><a id="wpa_release_b02_btn_no" class="wpa_release_b02_btn_no" href="javascript:;"></a></div>','<div id="closeBtn" class="closeBtn"></div>',"</div>"].join(""),script:"js/wpa_b02",style:"css/wpa",init:function(a9,bb){var bh=bb.params,be=bh.btn1||"",bc=bh.btn2||"",bl=bh.title||"",bn=bh.cot||"",bf=a9.getElementById("wpa_release_b02"),bm=a9.getElementById("wpa_release_b02_title"),bg=a9.getElementById("wpa_release_b02_c_lc"),ba=a9.getElementById("wpa_release_b02_c_rc"),bd=a9.getElementById("wpa_release_b02_btn_yes"),bj=a9.getElementById("wpa_release_b02_btn_no"),bk=a9.getElementById("closeBtn");bm.innerHTML=bb.xssFilter(bl);ba.innerHTML=bb.xssFilter(bn).replace(/\n/g,"<br />");bd.innerHTML=bb.xssFilter(be);bj.innerHTML=bb.xssFilter(bc);var bi=decodeURIComponent(bh.tx);if(bi.indexOf("http")===-1){bi=/^https/.test(aP.location.href)?"https://id.b.qq.com/static/account/bizqq/images/wpa/wpa_tx_0"+bi+".jpg":"http://cdn.b.qq.com/account/bizqq/images/wpa/wpa_tx_0"+bi+".jpg"}bg.innerHTML='<img src="'+bb.xssFilter(bi)+'" alt="'+bb.xssFilter(bl)+'" />';bb.addClass(bf,"wpa_release_b02_0"+parseInt(bb.params.csty,10));bb.addEvent(bd,"click",bb.proxy(bb,bb.chat));bb.addEvent(bj,"click",bb.proxy(bb,bb.remove));bb.addEvent(bk,"click",bb.proxy(bb,bb.remove))}},b03:{templ:['<div id="wpa_release_b03" class="wpa_release_b03 wpa_release_b03_01">','<div class="wpa_release_b03_title"><span id="wpa_release_b03_title"></span></div>','<div id="wpa_release_b03_content" class="wpa_release_b03_content">','<p id="wpa_release_b03_c_1" class="wpa_release_b03_c_1"></p>','<p id="wpa_release_b03_c_2" class="wpa_release_b03_c_2"></p>',"</div>",'<div id="wpa_release_b03_btn_box" class="wpa_release_b03_btn_box"><a id="wpa_release_b03_btn_yes" class="wpa_release_b03_btn_yes" href="javascript:;"></a><a id="wpa_release_b03_btn_no" class="wpa_release_b03_btn_no" href="javascript:;"></a></div>','<div id="closeBtn" class="closeBtn"></div>',"</div>"].join(""),script:"js/wpa_b03",style:"css/wpa",init:function(ba,be){var bh=be.params,bg=bh.btn1||"",bf=bh.btn2||"",bl=bh.title||"",bn=bh.cot1||"",bm=bh.cot2||"",bd=ba.getElementById("wpa_release_b03"),bi=ba.getElementById("wpa_release_b03_title"),bb=ba.getElementById("wpa_release_b03_c_1"),a9=ba.getElementById("wpa_release_b03_c_2"),bj=ba.getElementById("wpa_release_b03_btn_yes"),bc=ba.getElementById("wpa_release_b03_btn_no"),bk=ba.getElementById("closeBtn");bi.innerHTML=be.xssFilter(bl);bb.innerHTML=be.xssFilter(bn);a9.innerHTML=be.xssFilter(bm);bj.innerHTML=be.xssFilter(bg);bc.innerHTML=be.xssFilter(bf);be.addClass(bd,"wpa_release_b03_0"+parseInt(be.params.tx,10));be.addEvent(bj,"click",be.proxy(be,be.chat));be.addEvent(bc,"click",be.proxy(be,be.remove));be.addEvent(bk,"click",be.proxy(be,be.remove))}},b04:{templ:['<div id="wpa_release_b04" class="wpa_release_b04 wpa_release_b04_01">','<div class="wpa_release_b04_title"><span id="wpa_release_b04_title"></span></div>','<div id="wpa_release_b04_content" class="wpa_release_b04_content">','<p id="wpa_release_b04_c_1" class="wpa_release_b04_c_1"></p>','<p id="wpa_release_b04_c_2" class="wpa_release_b04_c_2"></p>',"</div>",'<div id="wpa_release_b04_btn_box" class="wpa_release_b04_btn_box"><a id="wpa_release_b04_btn" class="wpa_release_b04_btn" href="javascript:;"></a></div>','<div id="closeBtn" class="closeBtn"></div>',"</div>"].join(""),script:"js/wpa_b04",style:"css/wpa",init:function(bb,bd){var bg=bd.params,be=bg.kfuin||"",bi=bg.title||"",bj=bg.cot1||"",bf=bg.btn1||"",bc=bb.getElementById("wpa_release_b04"),bl=bb.getElementById("wpa_release_b04_title"),ba=bb.getElementById("wpa_release_b04_c_1"),a9=bb.getElementById("wpa_release_b04_c_2"),bk=bb.getElementById("wpa_release_b04_btn"),bh=bb.getElementById("closeBtn");bl.innerHTML=bd.xssFilter(be);ba.innerHTML=bd.xssFilter(bi);a9.innerHTML=bd.xssFilter(bj).replace(/\n/g,"<br />");bk.innerHTML=bd.xssFilter(bf);bd.addClass(bc,"wpa_release_b04_0"+parseInt(bd.params.tx,10));bd.addEvent(bk,"click",bd.proxy(bd,bd.chat));bd.addEvent(bh,"click",bd.proxy(bd,bd.remove))}},i01:{templ:['<div id="wpa_release_i01" class="wpa_release_i01">','<div class="bg"></div>','<a id="wpa_release_i01_closeBtn" class="wpa_release_i01_closeBtn" href="javascript:;">close</a>','<a id="wpa_release_i01_confirmBtn" class="wpa_release_i01_confirmBtn" href="javascript:;">\u5F00\u59CB\u4EA4\u8C08</a>','<p id="cnt" class="cnt">\u60A8\u597D\uFF0C\u8BF7\u6709\u4EC0\u4E48\u53EF\u4EE5\u5E2E\u5230\u60A8\uFF1F\u8BF7\u63A5\u53D7\u804A\u5929\u9080\u8BF7\u3002</p>','<div id="closeBtn" class="closeBtn"></div>',"</div>"].join(""),script:"js/wpa_i01",style:"css/wpa",init:function(a9,bb){var bc=a9.getElementById("closeBtn"),ba=a9.getElementById("wpa_release_i01_confirmBtn");a9.getElementById("cnt").innerHTML=bb.xssFilter(bb.params.msg);bb.addEvent(bc,"click",bb.proxy(bb,function(){this.remove();Z.off();i("http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/reject_invite.php?nameAccount="+this.params.nameAccount+"&uid="+az)}));bb.addEvent(ba,"click",bb.proxy(bb,function(){this.chat();this.remove();Z.off();i("http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/accept_invite.php?nameAccount="+this.params.nameAccount+"&uid="+az)}))}},w01:{templ:'<div id="wpa_release_w01" class="wpa_release_w01"><a id="wpa_release_w01_btn" href="javascript:;"></a></div>',script:"js/wpa_w01",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML=ba.xssFilter(ba.params.btn1);ba.getOnlineStatus();ba.addEvent(a9.getElementById("launchBtn"),"click",ba.proxy(ba,ba.chat))}},w02:{templ:'<div id="wpa_release_w02" class="wpa_release_w02"><a id="wpa_release_w02_btn" href="javascript:;"></a></div>',script:"js/wpa_w02",style:"css/wpa",init:function(a9,ba){a9.getElementById("launchBtn").innerHTML=ba.xssFilter(ba.params.btn1);ba.getOnlineStatus();ba.addEvent(a9.getElementById("launchBtn"),"click",ba.proxy(ba,ba.chat))}}};var a3=function(ba,a9){this.doc=ba.document;this.wpa=a9;this.params=a9.params};a3.prototype={getJSONP:aL,proxy:A,onLoad:aG,setTimingRpt:function(bh,bg,bj,bc){var bm,bb=aP.performance||aP.webkitPerformance||aP.msPerformance,ba=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],bl=[],bd,bk,bf=bj;if(bb&&(bm=bb.timing)){if(typeof(bm.msFirstPaint)!="undefined"){ba.push("msFirstPaint")}else{if(bc){bf=bc}}bd=bm[ba[0]];for(var bi=1,be=ba.length;bi<be;bi++){bk=bm[ba[bi]];bk=(bk?(bk-bd):0);if(bk>0){bl.push(bi+"="+bk)}}if(aP.d0){bl.push("30="+(aP.d0-bd))}var a9="http://isdspeed.qq.com/cgi-bin/r.cgi?flag1="+bh+"&flag2="+bg+"&flag3="+bf+"&"+bl.join("&");i(a9)}},getOnlineStatus:function(){var bb=this,bd=this.params;var bc=(bd.al||bd.a);if(!bc){return}var a9=this.doc.location.href.indexOf("https://id.b.qq.com")>-1;var ba=a9?"https://id.b.qq.com/crm/index.php?rr=wpa/kfstatus&isAjax=1&aty="+bd.aty+"&al="+(bd.al||bd.a):"http://crm2.qq.com/cgi/portalcgi/get_kf_status.php?kfuin="+bd.kfuin+"&aty="+bd.aty+"&al="+bc;aL(ba,function(be){var bf=be.r===0&&be.data.list[bc]!==1;bf&&bb.setOffline()})},setOffline:function(){this.addClass(this.doc.body,"offline")},addClass:a0.addClass,hasClass:a0.hasClass,removeClass:a0.removeClass,addEvent:Q,xssFilter:function(a9){if(!a9){return""}return a9.replace(/</g,"&lt;").replace(/>/,"&gt;").replace(/'/g,"&acute;").replace(/"/,"&quot;")},chat:function(){this.wpa.launchChat()},remove:function(){this.wpa.remove()}};var a8={},a5={},a7={};aI={newWPA:function(bb){var a9=bb.kfuin;if(!a9){return false}var ba=new a6(bb);a8[a9]?a8[a9].push(ba):a8[a9]=[ba];return ba},findInPage:function(a9){return a8[a9]!==z},getParams:function(){var be=aP.document;var bc=be.getElementsByTagName("script");if(!bc.length||bc.length<1){return false}bc=bc[bc.length-1];var bg=bc.src.substring(bc.src.indexOf("?")+1,bc.src.length),ba=bg.split("&"),bf={};for(var bb=0,bd,a9;bd=ba[bb++];){a9=bd.split("=");bf[a9[0]]=decodeURIComponent(a9[1])}bf.referrer=be.referrer.length>500?be.referrer.substr(0,500):be.referrer;bf.cref=aP.location.href.length>500?aP.location.href.substr(0,500):aP.location.href;bf.pt=be.title.length>500?be.title.substr(0,500):be.title;if(bf.aty==="1"){bf.kfext=bf.a}bf.kfext=bf.kfext||"";bf.dm=l;return bf},invite:function(ba,bc){if(!ba){Z.on("\u3010\u60A8\u6709\u65B0\u4FE1\u606F\u3011");aI.newWPA(bc);return}try{var a9=A({params:bc},a6.prototype.launchChat);aP[ba]&&aP[ba](a9,bc.msg)}catch(bb){aI.newWPA(bc)}}};var a6=function(a9){this.params=a9;this.kfuin=this.nameAccount=a9.nameAccount=a9.kfuin;this.wty=a9.wty||aU;if(this.wty!==aU){return}this.render()};a6.prototype={getConfig:function(bg){if(this.sp){bg&&bg();return}var bb=this,a9=new a2("00"),be=this.nameAccount,ba=function(bh){var bj=bb.params,bi=bb.nameAccount;bb.kfuin=bj.kfuin=bh;a5[bi]=bh;a9.setChar(0,"1")},bf=function(bh){bb.sid=bh;a7[bb.nameAccount+":"+l]=bh;a9.setChar(1,"1");bc()},bc=function(){if(a9.getChar(0)==="0"||a9.getChar(1)==="0"){bb.sp="";return}bb.sp=x(parseInt(az,10).toString(16),"0",16)+x(parseInt(bb.sid||"",10).toString(16),"0",16);L.log("session parameter:"+bb.sp)};if(a5[be]){ba(a5[be])}if(a7[be+":"+l]){bf(a7[be])}if(a9.bits==="11"){bg&&bg();return}var bd={type:new a2(a9.bits).reverse().bits,kfuin:be,nameAccount:be};if(a9.getChar(1)==="0"){bd.dm=l}aL("http://crm2.qq.com/cgi/wpacgi/get_wpa_click_params.php",bd,function(bj){if(bj.numRet&&bj.numRet.r===0){var bh=(bj.numRet.kfuin||be)+"";ba(bh)}if(bj.taRet&&bj.taRet.r===0){var bi=(bj.taRet.sid||"")+"";bf(bi)}bg&&bg()})},render:function(){var bd=this.params,bh=bd.wid;if(bh){var bb=P.getElementById(bh),bc=A(this,function(bi){this.wElem=bi;this.createDefinedWPA()});if(bb){bc(bb)}else{aG(A(this,function(){var bi=P.getElementById(bh);bi&&bc(bi)}))}return}var a9,bg,be=parseInt(bd.type),bf,ba=false;switch(be){case 1:bf="a01";a9=102;bg=24;break;case 2:bf="a02";a9=102;bg=24;break;case 3:bf="a03";a9=84;bg=24;break;case 4:bf="a04";a9=120;bg=40;break;case 5:bf="a05";a9=126;bg=42;break;case 6:bf="a06";a9=126;bg=42;break;case 7:bf="a07";a9=174;bg=80;break;case 8:bf="a08";a9=174;bg=80;break;case 9:bf="a09";a9=230;bg=92;break;case 10:bf="b01";a9=106;bg=164;ba=true;break;case 11:bf="b02";a9=346;bg=164;ba=true;break;case 12:bf="b03";a9=404;bg=200;ba=true;break;case 13:bf="b04";a9=138;bg=320;ba=true;break;case 20:bf="i01";a9=368;bg=192;ba=true;break;case 30:bf="w01";a9=25;bg=25;break;case 31:bf="w02";a9=102;bg=24;break;case 14:bf="c01";break}this.type=bf;this.width=a9;this.height=bg;this.createWPA();if((be>9&&be<14)||be===20){this.initFloatWPA()}},createWPA:function(){var bb=new aA("7818","4","1");var a9="iframediv"+aS(),bg=this,bf=this.type,ba=this.width,bh=this.height,bi=a4[bf];var bd=P.readyState;if(bd==="loaded"||bd==="complete"){var bc;try{bc=P.createElement('<iframe id="'+a9+'" scrolling="no" frameborder="0" width="'+ba+'" height="'+bh+'" allowtransparency="true" src="about:blank"></iframe>')}catch(be){bc=P.createElement("iframe");bc.id=a9;bc.width=ba;bc.height=bh;bc.setAttribute("scrolling","no");bc.setAttribute("frameborder",0);bc.setAttribute("allowtransparency",true);bc.setAttribute("src","about:blank")}P.getElementsByTagName("body")[0].appendChild(bc)}else{P.write('<iframe id="'+a9+'" scrolling="no" frameborder="0" width="'+ba+'" height="'+bh+'" allowtransparency="true" src="about:blank"></iframe>')}(function(){var bl=bg.iframe=P.getElementById(a9);if(!bl){setTimeout(arguments.callee,1);return}if(aJ.msie){try{var bn=bl.contentWindow.document}catch(bm){bl.src="javascript:void((function(){document.open();document.domain='"+P.domain+"';document.close()})())"}}var bj=function(){var br=bl.contentWindow,bq=bl.contentDocument||br.document;var bp=new a3(br,bg);bq.open();bq.write(['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">','<html xmlns="http://www.w3.org/1999/xhtml">',"<head>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',aJ.msie&&bl.src!=="about:blank"?"<script>document.domain='"+P.domain+"';<\/script>":"","</head>","<body>",bi.templ,"</body>","</html>"].join(""));bq.close();aa.load("style",c+"css/wpa."+(af?"grey.":"")+"css?v="+ai,{context:bq});bi.init(bq,bp);var bo=af?4:2;bb.addPoint(bo).send()};if(/loaded|complete|undefined/.test(bl.readyState)){bj()}else{var bk=function(){W(bl,"load",bk);bj()};Q(bl,"load",bk)}})()},initFloatWPA:function(){var be=aP.document,bf=this.params,bd=parseInt(bf.type),bc=this.iframe,bb=this.width,a9=this.height;bc.style.cssText=["display:none;","position:absolute;","z-index:2147483647!important;"].join(" ");aG(ba);function ba(){var bj=bc.style,bi=aJ.msie,bg=parseInt(aJ.version,10),bk=be.compatMode==="BackCompat";bj.position=parseInt(bf.fsty)==0?"fixed":"absolute";if(parseInt(bf.fposX)==0){bj.left=8+"px";bj.right="auto";bj.marginLeft=0}else{if(parseInt(bf.fposX)==1){bj.left="50%";bj.right="auto";bj.marginLeft="-"+parseInt(bb/2)+"px"}else{bj.left="auto";bj.right=8+"px";bj.marginLeft=0}}if(parseInt(bf.fposY)==0){bj.top=8+"px";bj.bottom="auto";bj.marginTop=0}else{if(parseInt(bf.fposY)==1){bj.top="50%";bj.bottom="auto";bj.marginTop="-"+parseInt(a9/2)+"px"}else{bj.top="auto";bj.bottom=8+"px";bj.marginTop=0}}if((bi&bg<7)||bk){bj.position="absolute";if(parseInt(bf.fsty)==0){bj.marginTop=0;var bh;if(parseInt(bf.fposY)==0){bh=8}else{if(parseInt(bf.fposY)==1){bh=(r(be)-a9)/2}else{bh=r(be)-a9-8}}setInterval(function(){bj.top=o(be)+bh+"px"},128)}}bj.display="block"}},createDefinedWPA:function(){Q(this.wElem,"click",A(this,this.launchChat))},remove:function(){var a9=this.iframe;a9.parentNode.removeChild(a9)},launchChat:function(){this.getConfig(A(this,function(){if(this.type==="a03"||!aJ.isWindow){this.launchAnonymousChat();return}var a9=this;ao(function(ba){if(ba){a9.launchAIOChat();return}new d({title:"\u53D1\u8D77\u4F1A\u8BDD\u63D0\u793A",content:"\u62B1\u6B49\uFF01\u65E0\u6CD5\u68C0\u6D4B\u5230\u60A8\u7535\u8111\u662F\u5426\u5B89\u88C5QQ\uFF0C\u8BF7\u60A8\u786E\u8BA4\u4EE5\u4FBF\u76F4\u63A5\u5411\u4F01\u4E1A\u53D1\u8D77\u4F1A\u8BDD\u3002",buttons:[{isFocus:true,text:"QQ\u5DF2\u5B89\u88C5\uFF0C\u70B9\u51FB\u4F1A\u8BDD",events:{click:function(){this.remove();a9.launchAIOChat()}}},{text:"\u672A\u5B89\u88C5\uFF0C\u53D1\u8D77\u7F51\u9875\u4F1A\u8BDD",events:{click:function(){this.remove();a9.launchAnonymousChat()}}}]})})}))},launchAIOChat:function(){var ba=P.createElement("iframe"),a9=P.getElementsByTagName("body")[0];ba.style.display="none";a9.insertBefore(ba,a9.firstChild);return function(){var be=this.params,bb=this.kfuin,bc={na:be.nameAccount,kfuin:bb,aty:be.aty,a:be.a,sid:this.sid||"",uid:az||"",url:location.href,title:P.title,dm:l};var bd=new aA("7818","4","1");aL("http://wpd.b.qq.com/cgi/get_sign.php",bc,function(bf){if(!bf||bf.r!==0){return}ba.src=bf.data.sign;bd.addPoint(5).send();i("http://promreport.crm2.qq.com/wpaclick/r.gif?ty=1&kfuin="+bb+"&version="+ai+"&browser="+encodeURIComponent(navigator.userAgent)+"&bfrom=1&appointType="+be.aty+"&appoint="+be.a)})}}(),launchAnonymousChat:function(){var a9=this.kfuin,ba="http://webchat.b.qq.com/webchat.htm?sid="+this.encrypt(this.kfuin.toString());aP.open(ba,"_blank","height=544, width=644,toolbar=no,scrollbars=no,menubar=no,status=no");var bb=this.params;i("http://promreport.crm2.qq.com/wpaclick/r.gif?ty=2&kfuin="+a9+"&version="+ai+"&browser="+encodeURIComponent(navigator.userAgent)+"&bfrom=1&appointType="+bb.aty+"&appoint="+bb.a)},encrypt:function(ba){var be="8ABC7DLO5MN6Z9EFGdeJfghijkHIVrstuvwWSTUXYabclmnopqKPQRxyz01234",a9=ba.length,bk=[],bi,bh,bg,bj;var bb=function(bm){bk[bk.length]=be.charAt(bm)};var bd=be.length;var bf=bd*bd;var bc=bd*5;for(bj=0;bj<a9;bj++){bi=ba.charCodeAt(bj);if(bi<bc){bb(Math.floor(bi/bd));bb(bi%bd)}else{bb(Math.floor(bi/bf)+5);bb(Math.floor(bi/bd)%bd);bb(bi%bd)}}var bl=bk.join("");return String(bl.length).length+String(bl.length)+bl}}})();var O;(function(){O=function(a3,a5,a4){this.kfuin=a3;this.pvid=a5;this.config=a4;this.genID();this.storage=new k(a3);this.monitors={master:y.newTask(A(this,this.masterMonitor),n).run(),invite:y.newTask(A(this,this.inviteMonitor),G).run()};this.heartBeat=y.newTask(A(this,this.heartBeatProcess),aT).run();this.setActive();aP.onfocus=A(this,this.setActive);L.log("slave "+this.id+" launched!")};O.prototype={genID:function(){this.id="slid_"+aS()%1000+"_"+Math.round(Math.random()*100)},masterMonitor:function(){if(ay[this.kfuin]){return}L.log("monitoring mater state");var a3=this.storage.get(aK)||0,a4=aS()-parseInt(a3);L.log("gap of master is "+a4);if(a4>3*R){this.recoverMaster()}},recoverMaster:function(){ay[this.kfuin]=new h(this.kfuin,this.pvid,this.config);L.log("recover master by slave "+this.id)},inviteMonitor:function(){if(this.isInvited()){this.kill()}else{if(this.isInviting()){if(this.isActive()){this.invite()}}}L.log("slave "+this.id+" monitoring invite state")},kill:function(){this.monitors.invite.drop();this.heartBeat.drop();var a6=this.storage,a5=[this.id];for(var a4=0,a3;a3=a5[a4++];){a6.del(a3)}L.log("slave "+this.id+" killed")},invite:function(){var a3=this.storage.get(X);var a4={wty:aU,kfuin:this.kfuin,type:J,aty:a3?(a3===ab?a1:B):a1,a:a3||"",iv:m,fsty:al,fposX:ah,fposY:u,sv:E,sp:this.pvid,dm:l,msg:this.storage.get(ak)};aI.invite(this.config.di,a4);this.storage.set(au,aX);L.log("invited by slave "+this.id)},heartBeatProcess:function(){var a4=this.storage,a3=a4.get(aY);if(!a3){a4.set(aY,this.id+"|")}else{if(a3.indexOf(this.id+"|")===-1){a4.set(aY,this.id+"|"+a3)}}a4.set(this.id,aS());L.log("update slave heartbeat "+this.id)},setActive:function(){var a5=this.storage,a4=a5.get(aY)||"",a3=this.id+aC;if(a4.indexOf(this.id)>-1){a4=a4.replace(a3,"")}a4+=a3;a5.set(aY,a4)},isActive:function(){var a3=this.storage.get(aY);if(!a3){return false}return a3.substr(0,a3.length-1).split(aC).pop()===this.id},isInvited:function(){return this.storage.get(au)===aX},isInviting:function(){return this.storage.get(au)===e}}})();var h;(function(){h=function(a3,a5,a4){this.kfuin=a3;this.pvid=a5;this.config=a4;this.storage=new k(a3);this.genID();this.sleep=false;this.storage.set(am,this.id);this.heartBeatProcess();this.heartBeat=y.newTask(A(this,this.heartBeatProcess),R).run();this.initWithConfig();L.log("master launched!")};h.prototype={genID:function(){this.id=aS()%1000+"_"+Math.round(Math.random()*100)},setInviteState:function(a4,a3,a5){if(a4===e){this.storage.set(X,a3);this.storage.set(ak,a5)}this.storage.set(au,a4)},isInvited:function(){var a3=this.storage.get(au)===aX;if(a3){this.recycle();this.isInvited=function(){return true}}return a3},initWithConfig:function(){var a3=this.config;if(a3.r!==aD){this.storage.set(aK,aV);return}if(a3.isAuto===aW){this.storage.set(ak,a3.autoMsg);this.autoInviteTimer=setTimeout(A(this,function(){this.autoInvite()}),a3.autoTime*1000)}this.monitors={slave:y.newTask(A(this,this.slaveMonitor),aT).run(),server:y.newTask(A(this,this.serverMonitor),f).run(),sleep:y.newTask(A(this,this.sleepMonitor),ar).run()};L.log("master inited with config")},autoInvite:function(){if(this.isInvited()){return}var a4={kfuin:this.kfuin,uid:this.pvid};var a3=this.monitors.server;a3.pause();aL(I,a4,A(this,function(a5){if(a5.r!==aD){a3.run();return}if(!this.isInvited()){this.setInviteState(e,ab,this.storage.get(ak));y.once(function(){a3.run()},5000).run()}}))},ajustServerMonitorGap:function(a3){this.monitors.server.setGap(Math.min(Math.max(f,a3),D))},serverMonitor:function(){var a5=this.storage.get(au),a3=this.config.hbDomain?decodeURIComponent(this.config.hbDomain):aj;if(this.sleep){return false}var a4={kfuin:this.kfuin,uid:this.pvid};if(a5===e){a4.inviteState=v}if(a5===aX){a4.inviteState=w}aL(a3,a4,A(this,function(a6){if(a6.r!==aD){return false}if(a6.gap){this.ajustServerMonitorGap(a6.gap*1000)}if(a6.inviteState===g){return false}if(a6.inviteState===v){this.setInviteState(e,a6.kfext,a6.inviteMsg);return false}if(a6.inviteState===w){this.setInviteState(aX)}}));L.log(this.kfuin+" is monitoring server")},slaveMonitor:function(){if(this.isInvited()){this.monitors.slave.drop()}var ba=this.storage,a3=ba.get(aY);if(!a3){return}a3=a3.split(aC);var a8="",a7=aS(),a6,a4,a9;for(var a5=0;a4=a3[a5++];){L.log("monitoring slave "+a4+" state");a6=ba.get(a4)||0;a9=a7-parseInt(a6);L.log("gap of slave "+a4+" is "+a9);if(a9>5*aT){ba.del(a4);L.log("clear slave "+a4+" in storage")}else{a8+=a4+aC}}ba.set(aY,a8)},sleepMonitor:function(){var a3=this.storage.get(aY),a4=a3.substr(0,a3.length-1).split(aC).pop();if(this.sleep){if(this.activeSlave!==a4){this.activeSlave=a4;this.sleep=false;this.monitors.sleep.setGap(ar)}}else{if(this.activeSlave===a4){this.sleep=true;this.monitors.sleep.setGap(q)}else{this.activeSlave=a4}}},kill:function(){ay[this.kfuin]=z;this.monitors.server.drop();this.monitors.slave.drop();this.heartBeat.drop();clearTimeout(this.autoInviteTimer);L.log("master killed")},recycle:function(){var a6=this.storage,a5=[X,ak];for(var a4=0,a3;a3=a5[a4++];){a6.del(a3)}L.log("storage recycled")},heartBeatProcess:function(){var a3=this.storage;if(a3.get(am)!==this.id){this.kill();return false}this.storage.set(aK,aS())}}})();var az=k.get(p)||"";var b=function(){var a3=false;return function(a6,a7){var a5=false;if(az){a7(az);a5=true}if(!a3){var a4="http://tajs.qq.com/crmqq.php?uid="+a6+"&dm="+l;aE(a4,{callback:function(){a3=true;if(a5){return}az=k.get(p);if(az){a7(az)}else{setTimeout(arguments.callee,30)}}})}}}();var ay={};aP.BQQWPALOAD=function(){var a9=aI.getParams();if(!a9){return}var a3=a9.kfuin;if(!a3||typeof a3==="undefined"){return}var a7=aI.findInPage(a3);a9.sv=E;if(a9.wty===aU||!a9.wty){aI.newWPA(a9)}if(a7){return}if(!aQ){L.log("can't pass TAFilter");return}var a6,a4,a8=function(){if(!a6||!a4){return}L.log(a3+" has launched process");if(a4.block===av){return}if(H){L.log(a3+" has started slave");a4.di=a9.di;new O(a3,a6,a4)}};b(a3,function(ba){a6=ba;a8()});var a5={kfuin:a3,dm:l,title:P.title,url:aP.location.href.split("://")[1].split("?")[0]};aL(a,a5,function(ba){a4=ba;a8()})};setTimeout(function(){N.pushPoint().send();aL("http://crm2.qq.com/cgi/wpacgi/get_version.php",function(a3){if(ai===a3.data.version){return}aE("http://static.b.qq.com/account/bizqq/js/wpa.js?reset=1&v="+a3.data.version+"&t="+ +new Date())})},1)})(window)}window.BQQWPALOAD();